### 什么是网络身份标识？

网络身份标识`NetworkIdentity`组件是`Mirror`网络API的核心。它控制游戏对象在网络上的唯一身份，并使用该身份让各个网络系统知晓游戏对象的存在。

网络身份标识有一个`Server Only`的选项，勾选后此挂载该网络身份标识的对象就只会在服务器中生成。

### 这个组件有什么用？

挂载一个`NetworkIdentity`到一个游戏对象中即可将该对象定义为网络对象（即数据会在服务器和客户端之间来回同步的对象）。

`NetworkIdentity`组件包含网络跟踪信息，并在预览窗格中显示该信息。例如，对象已分配的场景ID、网络ID和资产ID，这些信息在DEBUG时会有用。其本身还储存有很多有用信息，这些信息由`Mirror`其他组件引用，也就是说网络身份标识同时也是一些其他`Mirror`组件的依赖项，比如任意的`NetworkBehavior`脚本。当依赖该组件的其他组件被添加挂载到对象中时，网络身份标识会自动被添加挂载到同一个游戏对象中。当然，任意合法的组件都可以引用网络身份标识的信息。

### 这个组件都有哪些有用信息？

除了资产ID、场景ID、网络ID和控制的玩家ID，网络身份标识还会自动判定各种网络状态，如下：

`isClient`: 如果当前运行的是客户端且挂载的游戏对象是由服务器生成的，返回真；
`isServer`：如果`NetworkServer.active`为真（意味着当前运行的是服务器）且服务器没有停止运行，返回真；
`isLocalPlayer`：如果挂载的游戏对象是运行在本地上的玩家对象（如RTSPlayer），返回真；
`hasAutority`：如果当前是客户端且拥有挂载的游戏对象权限，返回真；
`netId`：独一无二的网络ID；
`seneId`：独一无二的场景ID，用于生成场景；
`connectionToServer`：客户端连接到服务器的连接状态对象。仅仅当挂载对象是在客户端的玩家对象时有用；
`connectionToClient`：服务器连接到客户端的连接状态对象。仅仅当挂载对象是在服务端的玩家对象时有用。

### 什么是网络形变体？

网络形变体组件`Network Transform`可以看作是Unity本身自带的型变体组件`Transform`的补充。后者只能管理单机本地对象的位置、旋转和缩放，而前者可以通过网络来同步网络对象的位置、旋转和缩放。

具有网络形变体组件的对象必须加挂网络身份标识组件`Network Identity`。如果没有网络身份标识，在添加网络形变体的同时，`Mirror`会自动添加上一个网络身份标识。

### 为什么要用网络形变体？

当一个游戏对象是网络对象时，需要做到位置、旋转和缩放在服务器和客户端之间保持同步。网络形变体就是用来维持这些同步的。

### 网络形变体的工作原理是什么？

默认情况下，网络形变体是由服务器负责同步，即所有网络型变体默认都是服务器权限。这意味着，型变体的变化由服务器端发起。当服务器中的游戏对象发生形变时，`Mirror`会通过网络形变体和网络身份标识自动同步数据到客户端中对应的对象中。所以，在默认情况下，要在服务器端进行对象的形变。

如果选中`Client Authority`对话框，则可将这个流程反转，变成由客户端进行数据同步，但仅仅适用当前组件。这种情况下，需要在客户端进行对象形变。

以上两种情况，按需求定。

### 如何使用网络形变体？

直接添加网络形变体到游戏对象中即可。其中可以设置敏感程度`Sensitivity`和同步设置`Sync Settings`。

敏感程度是形变阈值，即形变程度超过了设定的值才会生成同步信息发给客户端。可以分别定义位置、旋转和大小形变的阈值。

同步设定可以设定同步对象和同步间隔。默认以及通常情况下，同步模式`Sync Mode`为`Observers`，即任何改变信息都是由服务端发送给所有的客户端中对应的对象中。同步模式可以改为`Owner Only`，即服务端仅仅发送改变信息给当前客户端中的对应对象。同步间隔`Sync Interval`用来定义同步这些改变信息的频率。

